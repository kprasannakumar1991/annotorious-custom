function g(a){throw a;}var i=void 0,l=!0,m=null,n=!1;function p(){return function(){}}function aa(a){return function(){return this[a]}}function ba(a){return function(){return a}}var q,s=this;function ca(a,b){var c=a.split("."),d=s;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&b!==i?d[f]=b:d=d[f]?d[f]:d[f]={}}function da(){}function ea(a){a.Za=function(){return a.tc?a.tc:a.tc=new a}}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return"array"==fa(a)}function ha(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function t(a){return"string"==typeof a}function v(a){return"function"==fa(a)}function ia(a){var b=typeof a;return"object"==b&&a!=m||"function"==b}function ja(a){return a[ka]||(a[ka]=++la)}var ka="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),la=0;
function ma(a,b,c){return a.call.apply(a.bind,arguments)}function na(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function oa(a,b,c){oa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return oa.apply(m,arguments)}
function pa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}function w(a,b){function c(){}c.prototype=b.prototype;a.na=b.prototype;a.prototype=new c;a.prototype.constructor=a};function qa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ra(a){if(!sa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ta,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ua,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(va,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(wa,"&quot;"));return a}var ta=/&/g,ua=/</g,va=/>/g,wa=/\"/g,sa=/[&<>\"]/;function xa(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var A=Array.prototype,ya=A.indexOf?function(a,b,c){return A.indexOf.call(a,b,c)}:function(a,b,c){c=c==m?0:0>c?Math.max(0,a.length+c):c;if(t(a))return!t(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},B=A.forEach?function(a,b,c){A.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=t(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)},za=A.filter?function(a,b,c){return A.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],e=0,h=t(a)?a.split(""):
a,j=0;j<d;j++)if(j in h){var k=h[j];b.call(c,k,j,a)&&(f[e++]=k)}return f},Aa=A.map?function(a,b,c){return A.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),e=t(a)?a.split(""):a,h=0;h<d;h++)h in e&&(f[h]=b.call(c,e[h],h,a));return f},Ba=A.every?function(a,b,c){return A.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=t(a)?a.split(""):a,e=0;e<d;e++)if(e in f&&!b.call(c,f[e],e,a))return n;return l};
function Ca(a,b){var c;a:{c=a.length;for(var d=t(a)?a.split(""):a,f=0;f<c;f++)if(f in d&&b.call(i,d[f],f,a)){c=f;break a}c=-1}return 0>c?m:t(a)?a.charAt(c):a[c]}function Da(a,b){return 0<=ya(a,b)}function D(a,b){var c=ya(a,b);0<=c&&A.splice.call(a,c,1)}function Ea(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Fa(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;if(ga(d)||(f=ha(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var e=a.length,h=d.length,j=0;j<h;j++)a[e+j]=d[j];else a.push(d)}}function Ga(a,b,c){return 2>=arguments.length?A.slice.call(a,b):A.slice.call(a,b,c)}function Ha(a,b){return a>b?1:a<b?-1:0};var Ia,Ja,Ka,La,Ma;function Na(){return s.navigator?s.navigator.userAgent:m}function Oa(){return s.navigator}La=Ka=Ja=Ia=n;var Pa;if(Pa=Na()){var Qa=Oa();Ia=0==Pa.indexOf("Opera");Ja=!Ia&&-1!=Pa.indexOf("MSIE");Ka=!Ia&&-1!=Pa.indexOf("WebKit");La=!Ia&&!Ka&&"Gecko"==Qa.product}var Ra=Ia,E=Ja,F=La,G=Ka,Sa=Oa();Ma=-1!=(Sa&&Sa.platform||"").indexOf("Mac");var Ta=!!Oa()&&-1!=(Oa().appVersion||"").indexOf("X11"),Ua;
a:{var Va="",Wa;if(Ra&&s.opera)var Xa=s.opera.version,Va="function"==typeof Xa?Xa():Xa;else if(F?Wa=/rv\:([^\);]+)(\)|;)/:E?Wa=/MSIE\s+([^\);]+)(\)|;)/:G&&(Wa=/WebKit\/(\S+)/),Wa)var Ya=Wa.exec(Na()),Va=Ya?Ya[1]:"";if(E){var Za,$a=s.document;Za=$a?$a.documentMode:i;if(Za>parseFloat(Va)){Ua=String(Za);break a}}Ua=Va}var ab={};
function H(a){var b;if(!(b=ab[a])){b=0;for(var c=qa(String(Ua)).split("."),d=qa(String(a)).split("."),f=Math.max(c.length,d.length),e=0;0==b&&e<f;e++){var h=c[e]||"",j=d[e]||"",k=RegExp("(\\d*)(\\D*)","g"),r=RegExp("(\\d*)(\\D*)","g");do{var x=k.exec(h)||["","",""],y=r.exec(j)||["","",""];if(0==x[0].length&&0==y[0].length)break;b=((0==x[1].length?0:parseInt(x[1],10))<(0==y[1].length?0:parseInt(y[1],10))?-1:(0==x[1].length?0:parseInt(x[1],10))>(0==y[1].length?0:parseInt(y[1],10))?1:0)||((0==x[2].length)<
(0==y[2].length)?-1:(0==x[2].length)>(0==y[2].length)?1:0)||(x[2]<y[2]?-1:x[2]>y[2]?1:0)}while(0==b)}b=ab[a]=0<=b}return b}var bb={};function cb(a){return bb[a]||(bb[a]=E&&!!document.documentMode&&document.documentMode>=a)};var db,eb=!E||cb(9);!F&&!E||E&&cb(9)||F&&H("1.9.1");E&&H("9");function fb(a){a=a.className;return t(a)&&a.match(/\S+/g)||[]}function gb(a,b){var c=fb(a),d=Ga(arguments,1),f=c.length+d.length;hb(c,d);a.className=c.join(" ");return c.length==f}function ib(a,b){var c=fb(a),d=Ga(arguments,1),f=jb(c,d);a.className=f.join(" ");return f.length==c.length-d.length}function hb(a,b){for(var c=0;c<b.length;c++)Da(a,b[c])||a.push(b[c])}function jb(a,b){return za(a,function(a){return!Da(b,a)})}
function kb(a,b,c){var d=fb(a);t(b)?D(d,b):ga(b)&&(d=jb(d,b));t(c)&&!Da(d,c)?d.push(c):ga(c)&&hb(d,c);a.className=d.join(" ")};function I(a,b){this.x=a!==i?a:0;this.y=b!==i?b:0};function lb(a,b){this.width=a;this.height=b}lb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};lb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function mb(a,b){for(var c in a)b.call(i,a[c],c,a)}var nb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ob(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<nb.length;e++)c=nb[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function pb(a){return a?new qb(rb(a)):db||(db=new qb)}function sb(){var a,b,c,d;a=document;if(a.querySelectorAll&&a.querySelector)return a.querySelectorAll(".openseadragon-container");if(a.getElementsByClassName){var f=a.getElementsByClassName("openseadragon-container");return f}f=a.getElementsByTagName("*");d={};for(b=c=0;a=f[b];b++){var e=a.className;"function"==typeof e.split&&Da(e.split(/\s+/),"openseadragon-container")&&(d[c++]=a)}d.length=c;return d}
function tb(a,b){mb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in ub?a.setAttribute(ub[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var ub={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function vb(a){var b=!G?a.documentElement:a.body,a=a.parentWindow||a.defaultView;return new I(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)}
function wb(a,b,c){var d=arguments,f=document,e=d[0],h=d[1];if(!eb&&h&&(h.name||h.type)){e=["<",e];h.name&&e.push(' name="',ra(h.name),'"');if(h.type){e.push(' type="',ra(h.type),'"');var j={};ob(j,h);delete j.type;h=j}e.push(">");e=e.join("")}e=f.createElement(e);h&&(t(h)?e.className=h:ga(h)?gb.apply(m,[e].concat(h)):tb(e,h));2<d.length&&xb(f,e,d,2);return e}
function xb(a,b,c,d){function f(c){c&&b.appendChild(t(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var e=c[d];if(ha(e)&&!(ia(e)&&0<e.nodeType)){var h;a:{if(e&&"number"==typeof e.length){if(ia(e)){h="function"==typeof e.item||"string"==typeof e.item;break a}if(v(e)){h="function"==typeof e.item;break a}}h=n}B(h?Ea(e):e,f)}else f(e)}}function yb(a){for(var b;b=a.firstChild;)a.removeChild(b)}function zb(a){a&&a.parentNode&&a.parentNode.removeChild(a)}
function Ab(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function rb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function qb(a){this.Ga=a||s.document||document}q=qb.prototype;q.da=function(a){return t(a)?this.Ga.getElementById(a):a};q.X=tb;q.createElement=function(a){return this.Ga.createElement(a)};q.createTextNode=function(a){return this.Ga.createTextNode(a)};
q.appendChild=function(a,b){a.appendChild(b)};q.append=function(a,b){xb(rb(a),a,arguments,1)};q.contains=Ab;var Bb;Bb=ba(l);/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

The "New" BSD License:

Copyright (c) 2005-2009, The Dojo Foundation
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
    may be used to endorse or promote products derived from this software
    without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function Cb(a,b){var c=b||[];a&&c.push(a);return c}var Db=G&&"BackCompat"==document.compatMode,Eb=document.firstChild.children?"children":"childNodes",Fb=n;
function Gb(a){function b(){0<=r&&(u.id=c(r,z).replace(/\\/g,""),r=-1);if(0<=x){var a=x==z?m:c(x,z);0>">~+".indexOf(a)?u.A=a:u.gb=a;x=-1}0<=k&&(u.V.push(c(k+1,z).replace(/\\/g,"")),k=-1)}function c(b,c){return qa(a.slice(b,c))}for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",d=[],f=-1,e=-1,h=-1,j=-1,k=-1,r=-1,x=-1,y="",C="",M,z=0,Sd=a.length,u=m,J=m;y=C,C=a.charAt(z),z<Sd;z++)if("\\"!=y)if(u||(M=z,u={va:m,la:[],Wa:[],V:[],A:m,gb:m,id:m,Fb:function(){return Fb?this.Rc:this.A}},x=z),0<=f)if("]"==
C){J.zb?J.Hb=c(h||f+1,z):J.zb=c(f+1,z);if((f=J.Hb)&&('"'==f.charAt(0)||"'"==f.charAt(0)))J.Hb=f.slice(1,-1);u.Wa.push(J);J=m;f=h=-1}else"="==C&&(h=0<="|~^$*".indexOf(y)?y:"",J.type=h+C,J.zb=c(f+1,z-h.length),h=z+1);else 0<=e?")"==C&&(0<=j&&(J.value=c(e+1,z)),j=e=-1):"#"==C?(b(),r=z+1):"."==C?(b(),k=z):":"==C?(b(),j=z):"["==C?(b(),f=z,J={}):"("==C?(0<=j&&(J={name:c(j+1,z),value:m},u.la.push(J)),e=z):" "==C&&y!=C&&(b(),0<=j&&u.la.push({name:c(j+1,z)}),u.vc=u.la.length||u.Wa.length||u.V.length,u.fd=
u.va=c(M,z),u.Rc=u.A=u.gb?m:u.A||"*",u.A&&(u.A=u.A.toUpperCase()),d.length&&d[d.length-1].gb&&(u.sc=d.pop(),u.va=u.sc.va+" "+u.va),d.push(u),u=m);return d}function Hb(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}}function Ib(a){return 1==a.nodeType}function Jb(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(Fb?a.getAttribute(b):a.getAttribute(b,2))||""}
var Kb={"*=":function(a,b){return function(c){return 0<=Jb(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==Jb(c,a).indexOf(b)}},"$=":function(a,b){return function(c){c=" "+Jb(c,a);return c.lastIndexOf(b)==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+Jb(b,a)+" ").indexOf(c)}},"|=":function(a,b){b=" "+b;return function(c){c=" "+Jb(c,a);return c==b||0==c.indexOf(b+"-")}},"=":function(a,b){return function(c){return Jb(c,a)==b}}},Lb="undefined"==
typeof document.firstChild.nextElementSibling,Mb=!Lb?"nextElementSibling":"nextSibling",Nb=!Lb?"previousElementSibling":"previousSibling",Ob=Lb?Ib:Bb;function Pb(a){for(;a=a[Nb];)if(Ob(a))return n;return l}function Qb(a){for(;a=a[Mb];)if(Ob(a))return n;return l}function Rb(a){var b=a.parentNode,c=0,d=b[Eb],f=a._i||-1,e=b._l||-1;if(!d)return-1;d=d.length;if(e==d&&0<=f&&0<=e)return f;b._l=d;f=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[Mb])Ob(b)&&(b._i=++c,a===b&&(f=c));return f}
function Sb(a){return!(Rb(a)%2)}function Tb(a){return Rb(a)%2}
var Vb={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return Pb},"last-child":function(){return Qb},"only-child":function(){return function(a){return!Pb(a)||!Qb(a)?n:l}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return n}return l}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},
not:function(a,b){var c=Gb(b)[0],d={D:1};"*"!=c.A&&(d.A=1);c.V.length||(d.V=1);var f=Ub(c,d);return function(a){return!f(a)}},"nth-child":function(a,b){if("odd"==b)return Tb;if("even"==b)return Sb;if(-1!=b.indexOf("n")){var c=b.split("n",2),d=c[0]?"-"==c[0]?-1:parseInt(c[0],10):1,f=c[1]?parseInt(c[1],10):0,e=0,h=-1;0<d?0>f?f=f%d&&d+f%d:0<f&&(f>=d&&(e=f-f%d),f%=d):0>d&&(d*=-1,0<f&&(h=f,f%=d));if(0<d)return function(a){a=Rb(a);return a>=e&&(0>h||a<=h)&&a%d==f};b=f}var j=parseInt(b,10);return function(a){return Rb(a)==
j}}},Wb=E?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return Fb?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}};
function Ub(a,b){if(!a)return Bb;var b=b||{},c=m;b.D||(c=Hb(c,Ib));b.A||"*"!=a.A&&(c=Hb(c,function(b){return b&&b.tagName==a.Fb()}));b.V||B(a.V,function(a,b){var e=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=Hb(c,function(a){return e.test(a.className)});c.count=b});b.la||B(a.la,function(a){var b=a.name;Vb[b]&&(c=Hb(c,Vb[b](b,a.value)))});b.Wa||B(a.Wa,function(a){var b,e=a.zb;a.type&&Kb[a.type]?b=Kb[a.type](e,a.Hb):e.length&&(b=Wb(e));b&&(c=Hb(c,b))});b.id||a.id&&(c=Hb(c,function(b){return!!b&&b.id==a.id}));
c||"default"in b||(c=Bb);return c}var Xb={};
function Yb(a){var b=Xb[a.va];if(b)return b;var c=a.sc,c=c?c.gb:"",d=Ub(a,{D:1}),f="*"==a.A,e=document.getElementsByClassName;if(c)if(e={D:1},f&&(e.A=1),d=Ub(a,e),"+"==c)var h=d,b=function(a,b,c){for(;a=a[Mb];)if(!Lb||Ib(a)){(!c||Zb(a,c))&&h(a)&&b.push(a);break}return b};else if("~"==c)var j=d,b=function(a,b,c){for(a=a[Mb];a;){if(Ob(a)){if(c&&!Zb(a,c))break;j(a)&&b.push(a)}a=a[Mb]}return b};else{if(">"==c)var k=d,k=k||Bb,b=function(a,b,c){for(var d=0,f=a[Eb];a=f[d++];)Ob(a)&&((!c||Zb(a,c))&&k(a,d))&&
b.push(a);return b}}else if(a.id)d=!a.vc&&f?Bb:Ub(a,{D:1,id:1}),b=function(b,c){var f=pb(b).da(a.id),e;if(e=f&&d(f))if(!(e=9==b.nodeType)){for(e=f.parentNode;e&&e!=b;)e=e.parentNode;e=!!e}if(e)return Cb(f,c)};else if(e&&/\{\s*\[native code\]\s*\}/.test(String(e))&&a.V.length&&!Db)var d=Ub(a,{D:1,V:1,id:1}),r=a.V.join(" "),b=function(a,b){for(var c=Cb(0,b),f,e=0,h=a.getElementsByClassName(r);f=h[e++];)d(f,a)&&c.push(f);return c};else!f&&!a.vc?b=function(b,c){for(var d=Cb(0,c),f,e=0,h=b.getElementsByTagName(a.Fb());f=
h[e++];)d.push(f);return d}:(d=Ub(a,{D:1,A:1,id:1}),b=function(b,c){for(var f=Cb(0,c),e,h=0,j=b.getElementsByTagName(a.Fb());e=j[h++];)d(e,b)&&f.push(e);return f});return Xb[a.va]=b}var $b={},ac={};function bc(a){var b=Gb(qa(a));if(1==b.length){var c=Yb(b[0]);return function(a){if(a=c(a,[]))a.fb=l;return a}}return function(a){for(var a=Cb(a),c,e,h=b.length,j,k,r=0;r<h;r++){k=[];c=b[r];e=a.length-1;0<e&&(j={},k.fb=l);e=Yb(c);for(var x=0;c=a[x];x++)e(c,k,j);if(!k.length)break;a=k}return k}}
var cc=!!document.querySelectorAll&&(!G||H("526"));
function dc(a,b){if(cc){var c=ac[a];if(c&&!b)return c}if(c=$b[a])return c;var c=a.charAt(0),d=-1==a.indexOf(" ");0<=a.indexOf("#")&&d&&(b=l);if(cc&&!b&&-1==">~+".indexOf(c)&&(!E||-1==a.indexOf(":"))&&!(Db&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf("|=")){var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return ac[a]=function(b){try{9==b.nodeType||d||g("");var c=b.querySelectorAll(f);E?c.Ic=l:c.fb=l;return c}catch(e){return dc(a,l)(b)}}}var e=a.split(/\s*,\s*/);return $b[a]=
2>e.length?bc(a):function(a){for(var b=0,c=[],d;d=e[b++];)c=c.concat(bc(d)(a));return c}}var ec=0,fc=E?function(a){return Fb?a.getAttribute("_uid")||a.setAttribute("_uid",++ec)||ec:a.uniqueID}:function(a){return a._uid||(a._uid=++ec)};function Zb(a,b){if(!b)return 1;var c=fc(a);return!b[c]?b[c]=1:0}
function gc(a){if(a&&a.fb)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;ec++;if(E&&Fb){var c=ec+"";a[0].setAttribute("_zipIdx",c);for(var d=1,f;f=a[d];d++)a[d].getAttribute("_zipIdx")!=c&&b.push(f),f.setAttribute("_zipIdx",c)}else if(E&&a.Ic)try{for(d=1;f=a[d];d++)Ib(f)&&b.push(f)}catch(e){}else{a[0]&&(a[0]._zipIdx=ec);for(d=1;f=a[d];d++)a[d]._zipIdx!=ec&&b.push(f),f._zipIdx=ec}return b}
function K(a,b){if(!a)return[];if(a.constructor==Array)return a;if(!t(a))return[a];if(t(b)&&(b=t(b)?document.getElementById(b):b,!b))return[];var b=b||document,c=b.ownerDocument||b.documentElement;Fb=b.contentType&&"application/xml"==b.contentType||Ra&&(b.doctype||"[object XMLDocument]"==c.toString())||!!c&&(E?c.xml:b.xmlVersion||c.xmlVersion);return(c=dc(a)(b))&&c.fb?c:gc(c)}K.la=Vb;ca("goog.dom.query",K);ca("goog.dom.query.pseudos",K.la);!E||cb(9);var hc=!E||cb(9),ic=E&&!H("9");!G||H("528");F&&H("1.9b")||E&&H("8")||Ra&&H("9.5")||G&&H("528");F&&!H("8")||E&&H("9");function jc(){0!=kc&&(this.$c=Error().stack,ja(this))}var kc=0;jc.prototype.Kc=n;function L(a,b){this.type=a;this.currentTarget=this.target=b}L.prototype.ua=n;L.prototype.defaultPrevented=n;L.prototype.jb=l;L.prototype.preventDefault=function(){this.defaultPrevented=l;this.jb=n};function lc(a){lc[" "](a);return a}lc[" "]=da;function mc(a,b){a&&this.init(a,b)}w(mc,L);q=mc.prototype;q.target=m;q.relatedTarget=m;q.offsetX=0;q.offsetY=0;q.clientX=0;q.clientY=0;q.screenX=0;q.screenY=0;q.button=0;q.keyCode=0;q.charCode=0;q.ctrlKey=n;q.altKey=n;q.shiftKey=n;q.metaKey=n;q.Sc=n;q.P=m;
q.init=function(a,b){var c=this.type=a.type;L.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(F){var f;a:{try{lc(d.nodeName);f=l;break a}catch(e){}f=n}f||(d=m)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=G||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=G||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Sc=Ma?a.metaKey:a.ctrlKey;this.state=a.state;this.P=a;a.defaultPrevented&&this.preventDefault();delete this.ua};
q.preventDefault=function(){mc.na.preventDefault.call(this);var a=this.P;if(a.preventDefault)a.preventDefault();else if(a.returnValue=n,ic)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};q.Lc=aa("P");function nc(){}var oc=0;q=nc.prototype;q.key=0;q.wa=n;q.ic=n;q.init=function(a,b,c,d,f,e){v(a)?this.uc=l:a&&a.handleEvent&&v(a.handleEvent)?this.uc=n:g(Error("Invalid listener argument"));this.Ka=a;this.xc=b;this.src=c;this.type=d;this.capture=!!f;this.Ia=e;this.ic=n;this.key=++oc;this.wa=n};q.handleEvent=function(a){return this.uc?this.Ka.call(this.Ia||this.src,a):this.Ka.handleEvent.call(this.Ka,a)};var pc={},N={},qc={},rc={};
function O(a,b,c,d,f){if(b){if(ga(b)){for(var e=0;e<b.length;e++)O(a,b[e],c,d,f);return m}var d=!!d,h=N;b in h||(h[b]={k:0,H:0});h=h[b];d in h||(h[d]={k:0,H:0},h.k++);var h=h[d],j=ja(a),k;h.H++;if(h[j]){k=h[j];for(e=0;e<k.length;e++)if(h=k[e],h.Ka==c&&h.Ia==f){if(h.wa)break;return k[e].key}}else k=h[j]=[],h.k++;var r=sc,x=hc?function(a){return r.call(x.src,x.key,a)}:function(a){a=r.call(x.src,x.key,a);if(!a)return a},e=x;e.src=a;h=new nc;h.init(c,e,a,b,d,f);c=h.key;e.key=c;k.push(h);pc[c]=h;qc[j]||
(qc[j]=[]);qc[j].push(h);a.addEventListener?(a==s||!a.lc)&&a.addEventListener(b,e,d):a.attachEvent(b in rc?rc[b]:rc[b]="on"+b,e);return c}g(Error("Invalid event type"))}function tc(a,b,c,d,f){if(ga(b))for(var e=0;e<b.length;e++)tc(a,b[e],c,d,f);else{d=!!d;a:{e=N;if(b in e&&(e=e[b],d in e&&(e=e[d],a=ja(a),e[a]))){a=e[a];break a}a=m}if(a)for(e=0;e<a.length;e++)if(a[e].Ka==c&&a[e].capture==d&&a[e].Ia==f){uc(a[e].key);break}}}
function uc(a){if(pc[a]){var b=pc[a];if(!b.wa){var c=b.src,d=b.type,f=b.xc,e=b.capture;c.removeEventListener?(c==s||!c.lc)&&c.removeEventListener(d,f,e):c.detachEvent&&c.detachEvent(d in rc?rc[d]:rc[d]="on"+d,f);c=ja(c);qc[c]&&(f=qc[c],D(f,b),0==f.length&&delete qc[c]);b.wa=l;if(b=N[d][e][c])b.wc=l,vc(d,e,c,b);delete pc[a]}}}
function vc(a,b,c,d){if(!d.ab&&d.wc){for(var f=0,e=0;f<d.length;f++)d[f].wa?d[f].xc.src=m:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.wc=n;0==e&&(delete N[a][b][c],N[a][b].k--,0==N[a][b].k&&(delete N[a][b],N[a].k--),0==N[a].k&&delete N[a])}}function wc(a,b,c,d,f){var e=1,b=ja(b);if(a[b]){a.H--;a=a[b];a.ab?a.ab++:a.ab=1;try{for(var h=a.length,j=0;j<h;j++){var k=a[j];k&&!k.wa&&(e&=xc(k,f)!==n)}}finally{a.ab--,vc(c,d,b,a)}}return Boolean(e)}function xc(a,b){a.ic&&uc(a.key);return a.handleEvent(b)}
function sc(a,b){if(!pc[a])return l;var c=pc[a],d=c.type,f=N;if(!(d in f))return l;var f=f[d],e,h;if(!hc){var j;if(!(j=b))a:{j=["window","event"];for(var k=s;e=j.shift();)if(k[e]!=m)k=k[e];else{j=m;break a}j=k}e=j;j=l in f;k=n in f;if(j){if(0>e.keyCode||e.returnValue!=i)return l;a:{var r=n;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(x){r=l}if(r||e.returnValue==i)e.returnValue=l}}r=new mc;r.init(e,this);e=l;try{if(j){for(var y=[],C=r.currentTarget;C;C=C.parentNode)y.push(C);h=f[l];h.H=h.k;for(var M=
y.length-1;!r.ua&&0<=M&&h.H;M--)r.currentTarget=y[M],e&=wc(h,y[M],d,l,r);if(k){h=f[n];h.H=h.k;for(M=0;!r.ua&&M<y.length&&h.H;M++)r.currentTarget=y[M],e&=wc(h,y[M],d,n,r)}}else e=xc(c,r)}finally{y&&(y.length=0)}return e}d=new mc(b,this);return e=xc(c,d)};function yc(){jc.call(this)}w(yc,jc);q=yc.prototype;q.lc=l;q.Jb=m;q.Lb=function(a){this.Jb=a};q.addEventListener=function(a,b,c,d){O(this,a,b,c,d)};q.removeEventListener=function(a,b,c,d){tc(this,a,b,c,d)};
q.dispatchEvent=function(a){var b=a.type||a,c=N;if(b in c){if(t(a))a=new L(a,this);else if(a instanceof L)a.target=a.target||this;else{var d=a,a=new L(b,this);ob(a,d)}var d=1,f,c=c[b],b=l in c,e;if(b){f=[];for(e=this;e;e=e.Jb)f.push(e);e=c[l];e.H=e.k;for(var h=f.length-1;!a.ua&&0<=h&&e.H;h--)a.currentTarget=f[h],d&=wc(e,f[h],a.type,l,a)&&a.jb!=n}if(n in c)if(e=c[n],e.H=e.k,b)for(h=0;!a.ua&&h<f.length&&e.H;h++)a.currentTarget=f[h],d&=wc(e,f[h],a.type,n,a)&&a.jb!=n;else for(f=this;!a.ua&&f&&e.H;f=f.Jb)a.currentTarget=
f,d&=wc(e,f,a.type,n,a)&&a.jb!=n;a=Boolean(d)}else a=l;return a};function zc(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}zc.prototype.contains=function(a){return!this||!a?n:a instanceof zc?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Ac(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Ac.prototype.contains=function(a){return a instanceof Ac?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function P(a,b,c){t(b)?Bc(a,c,b):mb(b,pa(Bc,a))}function Bc(a,b,c){a.style[xa(c)]=b}function Q(a,b){var c=rb(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,m))?c[b]||c.getPropertyValue(b)||"":""}function Cc(a,b){return Q(a,b)||(a.currentStyle?a.currentStyle[b]:m)||a.style&&a.style[b]}function Dc(a,b,c){var d,f=F&&(Ma||Ta)&&H("1.9");b instanceof I?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Ec(d,f);a.style.top=Ec(b,f)}
function Fc(a){var b=a.getBoundingClientRect();E&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Gc(a){if(E&&!cb(8))return a.offsetParent;for(var b=rb(a),c=Cc(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Cc(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return m}
function Hc(a){var b,c=rb(a),d=Cc(a,"position"),f=F&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),e=new I(0,0),h;b=c?rb(c):document;if(h=E)if(h=!cb(9))pb(b),h=n;h=h?b.body:b.documentElement;if(a==h)return e;if(a.getBoundingClientRect)b=Fc(a),a=pb(c),a=vb(a.Ga),e.x=b.left+a.x,e.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),e.x=b.screenX-a.screenX,e.y=b.screenY-a.screenY;else{b=a;do{e.x+=b.offsetLeft;
e.y+=b.offsetTop;b!=a&&(e.x+=b.clientLeft||0,e.y+=b.clientTop||0);if(G&&"fixed"==Cc(b,"position")){e.x+=c.body.scrollLeft;e.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Ra||G&&"absolute"==d)e.y-=c.body.offsetTop;for(b=a;(b=Gc(b))&&b!=c.body&&b!=h;)if(e.x-=b.scrollLeft,!Ra||"TR"!=b.tagName)e.y-=b.scrollTop}return e}function Ic(a,b){var c=Jc(a),d=Jc(b);return new I(c.x-d.x,c.y-d.y)}
function Jc(a){var b=new I;if(1==a.nodeType){if(a.getBoundingClientRect){var c=Fc(a);b.x=c.left;b.y=c.top}else{var c=pb(a),c=vb(c.Ga),d=Hc(a);b.x=d.x-c.x;b.y=d.y-c.y}if(F&&!H(12)){var f;E?f="-ms-transform":G?f="-webkit-transform":Ra?f="-o-transform":F&&(f="-moz-transform");var e;f&&(e=Cc(a,f));e||(e=Cc(a,"transform"));e?(a=e.match(Kc),a=!a?new I(0,0):new I(parseFloat(a[1]),parseFloat(a[2]))):a=new I(0,0);b=new I(b.x+a.x,b.y+a.y)}}else f=v(a.Lc),e=a,a.targetTouches?e=a.targetTouches[0]:f&&a.P.targetTouches&&
(e=a.P.targetTouches[0]),b.x=e.clientX,b.y=e.clientY;return b}function Lc(a,b,c){b instanceof lb?(c=b.height,b=b.width):c==i&&g(Error("missing height argument"));a.style.width=Ec(b,l);a.style.height=Ec(c,l)}function Ec(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function Mc(a){if("none"!=Cc(a,"display"))return Nc(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Nc(a);b.display=c;b.position=f;b.visibility=d;return a}function Nc(a){var b=a.offsetWidth,c=a.offsetHeight,d=G&&!b&&!c;return(b===i||d)&&a.getBoundingClientRect?(a=Fc(a),new lb(a.right-a.left,a.bottom-a.top)):new lb(b,c)}function Oc(a){var b=Hc(a),a=Mc(a);return new Ac(b.x,b.y,a.width,a.height)}
function R(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function S(a,b){a.style.display=b?"":"none"}function Pc(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}
function Qc(a,b){if(E){var c=Pc(a,a.currentStyle?a.currentStyle[b+"Left"]:m),d=Pc(a,a.currentStyle?a.currentStyle[b+"Right"]:m),f=Pc(a,a.currentStyle?a.currentStyle[b+"Top"]:m),e=Pc(a,a.currentStyle?a.currentStyle[b+"Bottom"]:m);return new zc(f,d,e,c)}c=Q(a,b+"Left");d=Q(a,b+"Right");f=Q(a,b+"Top");e=Q(a,b+"Bottom");return new zc(parseFloat(f),parseFloat(d),parseFloat(e),parseFloat(c))}var Kc=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;E||F&&H("1.9.3");function Rc(a){for(var b=0,c=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:c,left:b}};function Sc(){this.za=[]}Sc.prototype.addHandler=function(a,b){this.za[a]||(this.za[a]=[]);this.za[a].push(b)};Sc.prototype.ib=function(a,b){var c=this.za[a];c&&D(c,b)};Sc.prototype.fireEvent=function(a,b,c){var d=n;(a=this.za[a])&&B(a,function(a){a=a(b,c);a!==i&&!a&&(d=l)});return d};function Tc(a,b){this.Q={};this.n=[];var c=arguments.length;if(1<c){c%2&&g(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){var f;if(a instanceof Tc)Uc(a),f=a.n.concat(),d=T(a);else{var c=[],e=0;for(f in a)c[e++]=f;f=c;c=[];e=0;for(d in a)c[e++]=a[d];d=c}for(c=0;c<f.length;c++)this.set(f[c],d[c])}}q=Tc.prototype;q.k=0;q.Mb=0;function T(a){Uc(a);for(var b=[],c=0;c<a.n.length;c++)b.push(a.Q[a.n[c]]);return b}
q.clear=function(){this.Q={};this.Mb=this.k=this.n.length=0};q.remove=function(a){return Vc(this.Q,a)?(delete this.Q[a],this.k--,this.Mb++,this.n.length>2*this.k&&Uc(this),l):n};function Uc(a){if(a.k!=a.n.length){for(var b=0,c=0;b<a.n.length;){var d=a.n[b];Vc(a.Q,d)&&(a.n[c++]=d);b++}a.n.length=c}if(a.k!=a.n.length){for(var f={},c=b=0;b<a.n.length;)d=a.n[b],Vc(f,d)||(a.n[c++]=d,f[d]=1),b++;a.n.length=c}}q.get=function(a,b){return Vc(this.Q,a)?this.Q[a]:b};
q.set=function(a,b){Vc(this.Q,a)||(this.k++,this.n.push(a),this.Mb++);this.Q[a]=b};function Vc(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function U(a,b){this.x=a;this.y=b};function Wc(a){this.points=a}function Xc(a){for(var b=0,c=a.length-1,d=0;d<a.length;d++)b+=(a[c].x+a[d].x)*(a[c].y-a[d].y),c=d;return b/2}
function Yc(a,b){for(var c,d=c=0,f,e=a.length-1,h=0;h<a.length;h++)f=a[h].x*a[e].y-a[e].x*a[h].y,c+=(a[h].x+a[e].x)*f,d+=(a[h].y+a[e].y)*f,e=h;f=6*Xc(a);c=new U(Math.abs(c/f),Math.abs(d/f));d=[];for(f=0;f<a.length;f++){var e=a[f],j=(0>Xc(a)?-1:1)*b,h=e.x-c.x,k=e.y-c.y,r=0<j?1:0>j?-1:0,j=Math.sqrt(Math.pow(j,2)/(1+Math.pow(h/k,2)));d.push({x:e.x+Math.abs(h/k*j)*(0<h?1:0>h?-1:0)*r,y:e.y+Math.abs(j)*(0<k?1:0>k?-1:0)*r})}return d};function Zc(a,b,c,d){0<c?(this.x=a,this.width=c):(this.x=a+c,this.width=-c);0<d?(this.y=b,this.height=d):(this.y=b+d,this.height=-d)};function $c(a,b,c,d){this.type=a;this.geometry=b;c&&(this.units=c);this.style=d?d:{}}function ad(a){return"rect"==a.type?a.geometry.width*a.geometry.height:"polygon"==a.type?Math.abs(Xc(a.geometry.points)):0}function bd(a){if("rect"==a.type)return a;if("polygon"==a.type){for(var b=a.geometry.points,c=b[0].x,d=b[0].x,f=b[0].y,e=b[0].y,h=1;h<b.length;h++)b[h].x>d&&(d=b[h].x),b[h].x<c&&(c=b[h].x),b[h].y>e&&(e=b[h].y),b[h].y<f&&(f=b[h].y);return new $c("rect",new Zc(c,f,d-c,e-f),n,a.style)}}
function cd(a,b){var c;c=a.geometry.points;var d=0>Xc(c)?-1:1;if(4>c.length)c=Yc(c,d*b);else{for(var f=c.length-1,e=1,h=[],j=0;j<c.length;j++)f=Yc([c[f],c[j],c[e]],d*b),h.push(f[1]),f=j,e++,e>c.length-1&&(e=0);c=h}return new $c("polygon",new Wc(c),n,a.style)}function dd(a,b){if("rect"==a.type){var c=b(a.geometry);return new $c("rect",c,n,a.style)}if("polygon"==a.type){var d=[];B(a.geometry.points,function(a){d.push(b(a))});return new $c("polygon",new Wc(d),n,a.style)}}
function ed(a){return JSON.stringify(a.geometry)};function fd(a,b,c){this.src=a;this.text=b;this.shapes=[c];this.context=document.URL};function gd(){}function hd(a,b){a.f=new Tc;a.Xb=[];a.Ca=[];a.ra=[];a.pa=[];a.nb=[];a.Pa={ta:n,sa:n};a.qa=new Tc;a.pb=i;a.ec=b}function id(a,b){var c=a.qa.get(b);c||(c={ta:n,sa:n},a.qa.set(b,c));return c}
function jd(a,b){var c=a.$a(b);if(!a.f.get(c)){var d=a.Ib(b),f=[],e=[];B(a.Xb,function(a){d.addHandler(a.type,a.Ia)});B(a.Ca,function(a){if(a.onInitAnnotator)a.onInitAnnotator(d)});B(a.pa,function(a){a.src==c&&(d.C(a),f.push(a))});B(a.nb,function(a){a.src==c&&(d.v(a),e.push(a))});B(f,function(b){D(a.pa,b)});B(e,function(b){D(a.nb,b)});var h=a.qa.get(c);h?(h.ta&&d.G(),h.sa&&d.W(),a.qa.remove(c)):(a.Pa.ta&&d.G(),a.Pa.sa&&d.W());a.pb&&d.X(a.pb);a.f.set(c,d);D(a.ra,b)}}
function kd(a){var b,c;for(c=a.ra.length;0<c;c--){for(var d=b=a.ra[c-1],f=d.offsetTop,e=d.offsetLeft,h=d.offsetWidth,j=d.offsetHeight;d.offsetParent;)d=d.offsetParent,f+=d.offsetTop,e+=d.offsetLeft;f<window.pageYOffset+window.innerHeight&&(e<window.pageXOffset+window.innerWidth&&f+j>window.pageYOffset&&e+h>window.pageXOffset)&&jd(a,b)}}function ld(a,b,c){if(b){var d=a.f.get(b);d?c?d.ma():d.W():id(a,b).sa=c}else B(T(a.f),function(a){c?a.ma():a.W()}),a.Pa.sa=!c,B(T(a.qa),function(a){a.sa=!c})}
function md(a,b,c){if(b){var d=a.f.get(b);d?c?d.R():d.G():id(a,b).ta=c}else B(T(a.f),function(a){c?a.R():a.G()}),a.Pa.ta=!c,B(T(a.qa),function(a){a.ta=!c})}q=gd.prototype;q.U=function(a,b){var c=i,d=i;t(a)?(c=a,d=b):v(a)&&(d=a);c?(c=this.f.get(c))&&c.U(d):B(T(this.f),function(a){a.U(d)})};q.stopSelection=function(a){a?(a=this.f.get(a))&&a.stopSelection():B(T(this.f),function(a){a.stopSelection()})};
q.C=function(a,b){if(nd(this,a.src)){var c=this.f.get(a.src);c?c.C(a,b):(this.pa.push(a),b&&D(this.pa,b))}};q.addHandler=function(a,b){B(T(this.f),function(c){c.addHandler(a,b)});this.Xb.push({type:a,Ia:b})};q.Va=function(a){this.Ca.push(a);B(T(this.f),function(b){if(a.onInitAnnotator)a.onInitAnnotator(b)})};function nd(a,b){return Vc(a.f.Q,b)?l:Ca(a.ra,function(c){return a.$a(c)==b})!=m}
q.destroy=function(a){if(a){var b=this.f.get(a);b&&(b.destroy(),this.f.remove(a))}else B(T(this.f),function(a){a.destroy()}),this.f.clear()};q.ba=function(a){if(nd(this,a)&&(a=this.f.get(a)))return a.ba().getName()};q.m=function(a){if(a){var b=this.f.get(a);return b?b.m():za(this.pa,function(b){return b.src==a})}var c=[];B(T(this.f),function(a){Fa(c,a.m())});Fa(c,this.pa);return c};q.ca=function(a){if(nd(this,a)&&(a=this.f.get(a)))return Aa(a.ca(),function(a){return a.getName()})};
q.W=function(a){ld(this,a,n)};q.G=function(a){md(this,a,n)};q.l=function(a){if(a){if(nd(this,a.src)){var b=this.f.get(a.src);b&&b.l(a)}}else B(T(this.f),function(a){a.l()})};q.init=function(){this.ec&&Fa(this.ra,this.ec());kd(this);var a=this,b=O(window,"scroll",function(){0<a.ra.length?kd(a):uc(b)})};q.Gb=function(a){this.kb(a)&&jd(this,a)};q.v=function(a){if(nd(this,a.src)){var b=this.f.get(a.src);b?b.v(a):this.nb.push(a)}};q.Ma=function(a,b){if(nd(this,a)){var c=this.f.get(a);c&&c.Ac(b)}};
q.X=function(a){this.pb=a;B(T(this.f),function(b){b.X(a)})};q.ma=function(a){ld(this,a,l)};q.R=function(a){md(this,a,l)};function V(a,b){var c=pb().createElement("DIV");c.innerHTML=a(b||od,i,i);if(1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType)return d}return c}var od={};function pd(a,b){a!=m&&this.append.apply(this,arguments)}q=pd.prototype;q.ja="";q.set=function(a){this.ja=""+a};q.append=function(a,b,c){this.ja+=a;if(b!=m)for(var d=1;d<arguments.length;d++)this.ja+=arguments[d];return this};q.clear=function(){this.ja=""};q.toString=aa("ja");/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

*/
function qd(){}
var rd={cd:"<",bd:">",Xc:"&",ed:"\u00a0",gd:'"',Yc:"'"},sd={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:20,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,
ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:20,select:0,small:0,span:0,strike:0,strong:0,style:20,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},td=/&/g,ud=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,vd=/</g,wd=/>/g,xd=/\"/g,yd=/=/g,zd=/\0/g,Ad=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,Bd=/^#(\d+)$/,Cd=/^#x([0-9A-Fa-f]+)$/,Dd=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[^a-z\\s>]+)",
"i"),Ed=RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<[!]--[\\s\\S]*?--\>|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");
qd.prototype.parse=function(a,b){var c=m,d=n,f=[],e,h,j;a.I=[];for(a.ea=n;b;){var k=b.match(d?Dd:Ed),b=b.substring(k[0].length);if(d)if(k[1]){var r=k[1].toLowerCase();if(k[2]){k=k[3];switch(k.charCodeAt(0)){case 34:case 39:k=k.substring(1,k.length-1)}k=k.replace(zd,"").replace(Ad,oa(this.Pc,this))}else k=r;f.push(r,k)}else k[4]&&(h!==i&&(j?a.Cc&&a.Cc(e,f):a.mc&&a.mc(e)),j&&h&12&&(c=c===m?b.toLowerCase():c.substring(c.length-b.length),d=c.indexOf("</"+e),0>d&&(d=b.length),h&4?a.jc&&a.jc(b.substring(0,
d)):a.yc&&a.yc(b.substring(0,d).replace(ud,"&amp;$1").replace(vd,"&lt;").replace(wd,"&gt;")),b=b.substring(d)),e=h=j=i,f.length=0,d=n);else if(k[1])Fd(a,k[0]);else if(k[3])j=!k[2],d=l,e=k[3].toLowerCase(),h=sd.hasOwnProperty(e)?sd[e]:i;else if(k[4])Fd(a,k[4]);else if(k[5])switch(k[5]){case "<":Fd(a,"&lt;");break;case ">":Fd(a,"&gt;");break;default:Fd(a,"&amp;")}}for(c=a.I.length;0<=--c;)a.Y.append("</",a.I[c],">");a.I.length=0};
qd.prototype.Pc=function(a){a=a.toLowerCase();if(rd.hasOwnProperty(a))return rd[a];var b=a.match(Bd);return b?String.fromCharCode(parseInt(b[1],10)):(b=a.match(Cd))?String.fromCharCode(parseInt(b[1],16)):""};function Gd(){};/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

*/
function Hd(a,b,c){this.Y=a;this.I=[];this.ea=n;this.Ec=b;this.eb=c}w(Hd,Gd);
var Id={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"*::accesskey":0,"*::tabindex":0,"*::onfocus":2,"*::onblur":2,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,
"area::href":1,"area::nohref":0,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,
"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,
"img::hspace":0,"img::ismap":0,"img::longdesc":1,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::autocomplete":0,"input::align":0,"input::alt":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,
"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,
"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,
"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,
"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};
Hd.prototype.Cc=function(a,b){if(!this.ea&&sd.hasOwnProperty(a)){var c=sd[a];if(!(c&32))if(c&16)this.ea=!(c&2);else{for(var d=b,f=0;f<d.length;f+=2){var e=d[f],h=d[f+1],j=m,k;if((k=a+"::"+e,Id.hasOwnProperty(k))||(k="*::"+e,Id.hasOwnProperty(k)))j=Id[k];if(j!==m)switch(j){case 0:break;case 2:case 3:h=m;break;case 4:case 5:case 6:case 7:case 8:case 9:h=this.eb?this.eb(h):h;break;case 1:h=this.Ec&&this.Ec(h);break;case 11:h&&"#"===h.charAt(0)?(h=this.eb?this.eb(h):h)&&(h="#"+h):h=m;break;default:h=
m}else h=m;d[f+1]=h}if(b=d){c&2||this.I.push(a);this.Y.append("<",a);c=0;for(d=b.length;c<d;c+=2)f=b[c],e=b[c+1],e!==m&&e!==i&&this.Y.append(" ",f,'="',e.replace(td,"&amp;").replace(vd,"&lt;").replace(wd,"&gt;").replace(xd,"&#34;").replace(yd,"&#61;"),'"');this.Y.append(">")}}}};
Hd.prototype.mc=function(a){if(this.ea)this.ea=n;else if(sd.hasOwnProperty(a)){var b=sd[a];if(!(b&50)){if(b&1)for(b=this.I.length;0<=--b;){var c=this.I[b];if(c===a)break;if(!(sd[c]&1))return}else for(b=this.I.length;0<=--b&&this.I[b]!==a;);if(!(0>b)){for(var d=this.I.length;--d>b;)c=this.I[d],sd[c]&1||this.Y.append("</",c,">");this.I.length=b;this.Y.append("</",a,">")}}}};function Fd(a,b){a.ea||a.Y.append(b)}Hd.prototype.yc=function(a){this.ea||this.Y.append(a)};
Hd.prototype.jc=function(a){this.ea||this.Y.append(a)};E||G&&H("525");function Jd(){}ea(Jd);Jd.prototype.Qc=0;Jd.Za();function Kd(a){jc.call(this);this.ad=a||pb();this.Tc=Ld}w(Kd,yc);Kd.prototype.Nc=Jd.Za();var Ld=m;function Md(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}g(Error("Invalid component state"))}q=Kd.prototype;q.qc=m;q.rc=n;q.Db=m;q.Tc=m;q.Kb=m;q.Bb=m;q.Ab=m;q.da=aa("Db");
q.Lb=function(a){this.Kb&&this.Kb!=a&&g(Error("Method not supported"));Kd.na.Lb.call(this,a)};q.Ya=function(){function a(a){a.rc&&a.Ya()}this.Bb&&B(this.Bb,a,i);this.Mc&&this.Mc.zc();this.rc=n};
q.removeChild=function(a,b){if(a){var c=t(a)?a:a.qc||(a.qc=":"+(a.Nc.Qc++).toString(36)),d;this.Ab&&c?(d=this.Ab,d=(c in d?d[c]:i)||m):d=m;a=d;c&&a&&(d=this.Ab,c in d&&delete d[c],D(this.Bb,a),b&&(a.Ya(),a.Db&&zb(a.Db)),c=a,c==m&&g(Error("Unable to set parent component")),c.Kb=m,Kd.na.Lb.call(c,m))}a||g(Error("Child is not in parent component"));return a};function Nd(){}var Od;ea(Nd);q=Nd.prototype;q.Xa=function(a,b,c){if(a=a.da?a.da():a)if(E&&!H("7")){var d=fb(a),f=[];b&&(d=d.concat([b]));B([],function(a){Ba(a,pa(Da,d))&&(!b||Da(a,b))&&f.push(a.join("_"))});f.push(b);pa(c?gb:ib,a).apply(m,f)}else c?gb(a,b):ib(a,b)};
q.Bc=function(a,b){var c;if(a.Na&32&&(c=a.Eb())){if(!b&&a.fa&32){try{c.blur()}catch(d){}a.fa&32&&(a.hc&4&&a.Na&4&&a.setActive(n),a.hc&32&&a.Na&32&&Pd(a,32,n)&&a.xa(32,n))}var f;(f=c.getAttributeNode("tabindex"))&&f.specified?(f=c.tabIndex,f="number"==typeof f&&0<=f&&32768>f):f=n;f!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};
q.xa=function(a,b,c){var d=a.da();if(d){var f;this.kc||(f=this.pc(),this.kc={1:f+"-disabled",2:f+"-hover",4:f+"-active",8:f+"-selected",16:f+"-checked",32:f+"-focused",64:f+"-open"});(f=this.kc[b])&&this.Xa(a,f,c);this.Dc(d,b,c)}};q.Dc=function(a,b,c){Od||(Od={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=Od[b])&&a.setAttribute("aria-"+b,c)};q.Eb=function(a){return a.da()};q.pc=ba("goog-control");var Qd={};function Rd(a,b,c){Kd.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=ja(b);if(d=Qd[d])break;b=b.na?b.na.constructor:m}b=d?v(d.Za)?d.Za():new d:m}this.La=b;this.Jc=a}w(Rd,Kd);q=Rd.prototype;q.Jc=m;q.fa=0;q.Na=39;q.hc=255;q.Vc=0;q.Wc=l;q.aa=m;q.Eb=function(){return this.La.Eb(this)};q.Xa=function(a,b){b?a&&(this.aa?Da(this.aa,a)||this.aa.push(a):this.aa=[a],this.La.Xa(this,a,l)):a&&this.aa&&(D(this.aa,a),0==this.aa.length&&(this.aa=m),this.La.Xa(this,a,n))};
q.Ya=function(){Rd.na.Ya.call(this);this.Oc&&this.Oc.detach();this.Wc&&this.isEnabled()&&this.La.Bc(this,n)};q.isEnabled=function(){return!(this.fa&1)};q.setActive=function(a){Pd(this,4,a)&&this.xa(4,a)};q.xa=function(a,b){this.Na&a&&b!=!!(this.fa&a)&&(this.La.xa(this,a,b),this.fa=b?this.fa|a:this.fa&~a)};function Pd(a,b,c){return!!(a.Na&b)&&!!(a.fa&b)!=c&&(!(a.Vc&b)||a.dispatchEvent(Md(b,c)))&&!a.Kc}v(Rd)||g(Error("Invalid component class "+Rd));v(Nd)||g(Error("Invalid renderer class "+Nd));
var Td=ja(Rd);Qd[Td]=Nd;function Ud(){return new Rd(m)}v(Ud)||g(Error("Invalid decorator function "+Ud));function Vd(){}w(Vd,Nd);ea(Vd);Vd.prototype.Bc=da;Vd.prototype.xa=function(a,b,c){Vd.na.xa.call(this,a,b,c);if((a=a.da())&&1==b)a.disabled=c};Vd.prototype.Dc=da;Vd.prototype.pc=ba("goog-textarea");E&&H(8);function Wd(a){return"object"===typeof a&&a&&0===a.Zc?a.content:String(a).replace(Xd,Yd)}var Zd={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Yd(a){return Zd[a]}var Xd=/[\x00\x22\x26\x27\x3c\x3e]/g;function $d(){return'<div class="annotorious-popup top-left" style="position:absolute;z-index:1"><div class="annotorious-popup-buttons"><a class="annotorious-popup-button annotorious-popup-button-edit" title="Edit" href="javascript:void(0);">EDIT</a><a class="annotorious-popup-button annotorious-popup-button-delete" title="Delete" href="javascript:void(0);">DELETE</a></div><span class="annotorious-popup-text"></span></div>'}
function ae(){return'<div class="annotorious-editor" style="position:absolute;z-index:1"><select class="annotorious-selection" tabindex="3"><option value="Select" tabindex="4">Select</option><option value="Bus" tabindex="5">Bus</option><option value="Car" tabindex="6">Car</option><option value="Bike" tabindex="7">Bike</option><option value="Auto" tabindex="8">Auto</option></select></div>'};function W(a){this.element=V(ae);this.d=a;this.Fc=a.getItem();this.rb=K(".annotorious-selection",this.element)[0];this.Sa=[];var b=this;O(this.rb,"change",function(c){console.log("Dropdown selected");c=c.target.value;0<b.rb.selectedIndex?(c=b.oc(c),a.C(c),a.stopSelection(),b.rb.selectedIndex=0,b.cc?a.fireEvent("onAnnotationUpdated",c,a.getItem()):a.fireEvent("onAnnotationCreated",c,a.getItem())):a.stopSelection(b.cc);b.close()});S(this.element,n);a.element.appendChild(this.element)}
W.prototype.open=function(a){(this.Qa=this.cc=a)&&this.Hc.hd(a.text);S(this.element,l);this.Hc.da().focus();B(this.Sa,function(b){var c=b.nc(a);t(c)?b.D.innerHTML=c:ia(c)&&1==c.nodeType&&(yb(b.D),b.D.appendChild(c))});this.d.fireEvent("onEditorShown",a)};W.prototype.close=function(){S(this.element,n)};W.prototype.setPosition=function(a){Dc(this.element,a.x,a.y)};
W.prototype.oc=function(a){var b=new pd;(new qd).parse(new Hd(b,function(a){return a},i),a);a=b.toString();this.Qa?this.Qa.text=a:this.Qa=new fd(this.Fc.src,a,this.d.ba().getShape());return this.Qa};W.prototype.addField=W.prototype.fc;W.prototype.getAnnotation=W.prototype.oc;function be(a,b,c){var d=this;c||(c="Click and Drag to Annotate");this.element=V(ce,{cb:c});this.d=a;this.$b=K(".annotorious-hint-msg",this.element)[0];this.Yb=K(".annotorious-hint-icon",this.element)[0];this.xb=function(){d.show()};this.wb=function(){de(d)};this.mb();de(this);b.appendChild(this.element)}
be.prototype.mb=function(){var a=this;this.bc=O(this.Yb,"mouseover",function(){a.show();window.clearTimeout(a.tb)});this.ac=O(this.Yb,"mouseout",function(){de(a)});this.d.addHandler("onMouseOverItem",this.xb);this.d.addHandler("onMouseOutOfItem",this.wb)};be.prototype.Ra=function(){uc(this.bc);uc(this.ac);this.d.ib("onMouseOverItem",this.xb);this.d.ib("onMouseOutOfItem",this.wb)};
be.prototype.show=function(){window.clearTimeout(this.tb);R(this.$b,0.8);var a=this;this.tb=window.setTimeout(function(){de(a)},3E3)};function de(a){window.clearTimeout(a.tb);R(a.$b,0)}be.prototype.destroy=function(){this.Ra();delete this.bc;delete this.ac;delete this.xb;delete this.wb;zb(this.element)};function ee(a){this.element=V($d);this.d=a;this.Gc=K(".annotorious-popup-text",this.element)[0];this.J=K(".annotorious-popup-buttons",this.element)[0];this.qb=n;this.Sa=[];var b=K(".annotorious-popup-button-edit",this.J)[0],c=K(".annotorious-popup-button-delete",this.J)[0],d=this;O(b,"mouseover",function(){gb(b,"annotorious-popup-button-active")});O(b,"mouseout",function(){ib(b,"annotorious-popup-button-active")});O(b,"click",function(){R(d.element,0);P(d.element,"pointer-events","none");a.Cb(d.e)});
O(c,"mouseover",function(){gb(c,"annotorious-popup-button-active")});O(c,"mouseout",function(){ib(c,"annotorious-popup-button-active")});O(c,"click",function(){a.fireEvent("beforeAnnotationRemoved",d.e)||(R(d.element,0),P(d.element,"pointer-events","none"),a.v(d.e),a.fireEvent("onAnnotationRemoved",d.e))});fe&&(O(this.element,"mouseover",function(){window.clearTimeout(d.ob);0.9>(d.J.style[xa("opacity")]||"")&&R(d.J,0.9);d.clearHideTimer()}),O(this.element,"mouseout",function(){R(d.J,0);d.startHideTimer()}),
a.addHandler("onMouseOutOfItem",function(){d.startHideTimer()}));R(this.J,0);R(this.element,0);P(this.element,"pointer-events","none");a.element.appendChild(this.element)}q=ee.prototype;q.fc=function(a){var b=wb("div","annotorious-popup-field");t(a)?b.innerHTML=a:v(a)?this.Sa.push({D:b,nc:a}):ia(a)&&1==a.nodeType&&b.appendChild(a);this.element.appendChild(b)};
q.startHideTimer=function(){this.qb=n;if(!this.Da){var a=this;this.Da=window.setTimeout(function(){a.d.fireEvent("beforePopupHide",a);a.qb||(R(a.element,0),P(a.element,"pointer-events","none"),R(a.J,0.9),delete a.Da)},150)}};q.clearHideTimer=function(){this.qb=l;this.Da&&(window.clearTimeout(this.Da),delete this.Da)};
q.show=function(a,b){this.clearHideTimer();b&&this.setPosition(b);a&&this.setAnnotation(a);this.ob&&window.clearTimeout(this.ob);R(this.J,0.9);if(fe){var c=this;this.ob=window.setTimeout(function(){R(c.J,0)},1E3)}R(this.element,0.9);P(this.element,"pointer-events","auto");this.d.fireEvent("onPopupShown",this.e)};q.setPosition=function(a){Dc(this.element,new I(a.x,a.y))};
q.setAnnotation=function(a){this.e=a;this.Gc.innerHTML=a.text?a.text.replace(/\n/g,"<br/>"):'<span class="annotorious-popup-empty">No comment</span>';"editable"in a&&a.editable==n?S(this.J,n):S(this.J,l);B(this.Sa,function(b){var c=b.nc(a);t(c)?b.D.innerHTML=c:ia(c)&&1==c.nodeType&&(yb(b.D),b.D.appendChild(c))})};ee.prototype.addField=ee.prototype.fc;function ge(){}q=ge.prototype;q.C=function(a,b){this.g.C(a,b)};q.addHandler=function(a,b){this.r.addHandler(a,b)};q.fireEvent=function(a,b,c){return this.r.fireEvent(a,b,c)};q.ba=aa("o");q.l=function(a){this.g.l(a)};q.v=function(a){this.g.v(a)};q.ib=function(a,b){this.r.ib(a,b)};q.stopSelection=function(a){fe&&S(this.c,n);this.Ea&&(this.Ea(),delete this.Ea);this.o.stopSelection();a&&this.g.C(a)};
function he(a,b){O(b,ie,function(c){console.log("start selection event");console.log(c);c=je(c,b);a.g.l(n);a.Ua?(S(a.c,l),a.o.startSelection(c.x,c.y)):(c=a.g.Ha(c.x,c.y),0<c.length&&a.g.l(c[0]))})};function ke(a,b){this.N=a;this.d=b;this.oa=[];this.T=[];this.ha=this.N.getContext("2d");this.ga=l;this.Ta=n;var c=this;O(this.N,le,function(a){if(c.ga){var b=me(c,a.offsetX,a.offsetY);b?(c.Ta=c.Ta&&b==c.e,c.e?c.e!=b&&(c.ga=n,c.d.popup.startHideTimer()):(c.e=b,ne(c),c.d.fireEvent("onMouseOverAnnotation",{z:c.e,mouseEvent:a}))):!c.Ta&&c.e&&(c.ga=n,c.d.popup.startHideTimer())}else c.ya=a});O(this.N,ie,function(){c.e!==i&&c.e!=n&&c.d.fireEvent("onAnnotationClicked",c.e)});b.addHandler("onMouseOutOfItem",
function(){delete c.e;c.ga=l});b.addHandler("beforePopupHide",function(){if(!c.ga&&c.ya){var a=c.e;c.e=me(c,c.ya.offsetX,c.ya.offsetY);c.ga=l;a!=c.e?(ne(c),c.d.fireEvent("onMouseOutOfAnnotation",{z:a,mouseEvent:c.ya}),c.d.fireEvent("onMouseOverAnnotation",{z:c.e,mouseEvent:c.ya})):c.e&&c.d.popup.clearHideTimer()}else ne(c)})}q=ke.prototype;
q.C=function(a,b){b&&(b==this.e&&delete this.e,D(this.oa,b),delete this.T[ed(b.shapes[0])]);this.oa.push(a);var c=a.shapes[0];if("pixel"!=c.units)var d=this,c=dd(c,function(a){return d.d.ka(a)});this.T[ed(a.shapes[0])]=c;ne(this)};q.v=function(a){a==this.e&&delete this.e;D(this.oa,a);delete this.T[ed(a.shapes[0])];ne(this)};q.m=function(){return Ea(this.oa)};q.l=function(a){(this.e=a)?this.Ta=l:this.d.popup.startHideTimer();ne(this);this.ga=l};
function me(a,b,c){a=a.Ha(b,c);if(0<a.length)return a[0]}
q.Ha=function(a,b){var c=[],d=this;B(this.oa,function(f){var e;e=d.T[ed(f.shapes[0])];if("rect"==e.type)e=a<e.geometry.x||b<e.geometry.y||a>e.geometry.x+e.geometry.width||b>e.geometry.y+e.geometry.height?n:l;else if("polygon"==e.type){e=e.geometry.points;for(var h=n,j=e.length-1,k=0;k<e.length;k++)e[k].y>b!=e[j].y>b&&a<(e[j].x-e[k].x)*(b-e[k].y)/(e[j].y-e[k].y)+e[k].x&&(h=!h),j=k;e=h}else e=n;e&&c.push(f)});A.sort.call(c,function(a,b){var c=d.T[ed(a.shapes[0])],j=d.T[ed(b.shapes[0])];return ad(c)-
ad(j)}||Ha);return c};function oe(a,b,c){var d=Ca(a.d.ca(),function(a){return a.getSupportedShapeType()==b.type});d?d.drawShape(a.ha,b,c):console.log("WARNING unsupported shape type: "+b.type)}function ne(a){a.ha.clearRect(0,0,a.N.width,a.N.height);B(a.oa,function(b){b!=a.e&&oe(a,a.T[ed(b.shapes[0])])});if(a.e){var b=a.T[ed(a.e.shapes[0])];oe(a,b,l);b=bd(b).geometry;a.d.popup.show(a.e,new U(b.x,b.y+b.height+5))}};var pe="ontouchstart"in window,fe=!pe,ie=pe?"touchstart":"mousedown",qe=pe?"touchenter":"mouseover",le=pe?"touchmove":"mousemove",re=pe?"touchend":"mouseup",se=pe?"touchleave":"mouseout";function je(a,b){var c=n;a.offsetX=a.offsetX?a.offsetX:n;a.offsetY=a.offsetY?a.offsetY:n;return c=(!a.offsetX||!a.offsetY)&&a.P.changedTouches?{x:a.P.changedTouches[0].clientX-Rc(b).left,y:a.P.changedTouches[0].clientY-Rc(b).top}:{x:a.offsetX,y:a.offsetY}};function te(){}q=te.prototype;q.init=function(a,b){this.Tb="#000000";this.Vb="#ffffff";this.Nb=n;this.Pb="#000000";this.Rb="#fff000";this.Ob=n;this.Qb=this.Wb=this.Ub=1;this.Sb=1.2;this.N=b;this.d=a;this.ha=b.getContext("2d");this.ha.lineWidth=1;this.sb=n};
q.mb=function(){var a=this,b=this.N;this.ub=O(this.N,le,function(c){console.log(c);c=je(c,b);if(a.sb){a.w={x:c.x,y:c.y};a.ha.clearRect(0,0,b.width,b.height);var c=a.w.x-a.F.x,d=a.w.y-a.F.y;a.drawShape(a.ha,{type:"rect",geometry:{x:0<c?a.F.x:a.w.x,y:0<d?a.F.y:a.w.y,width:Math.abs(c),height:Math.abs(d)},style:{}})}});this.vb=O(b,re,function(c){var d=je(c,b),f=a.getShape(),c=c.P?c.P:c;a.sb=n;f?(a.Ra(),a.d.fireEvent("onSelectionCompleted",{mouseEvent:c,shape:f,viewportBounds:a.getViewportBounds()})):
(a.d.fireEvent("onSelectionCanceled"),c=a.d.Ha(d.x,d.y),0<c.length&&a.d.l(c[0]))})};q.Ra=function(){this.ub&&(uc(this.ub),delete this.ub);this.vb&&(uc(this.vb),delete this.vb)};q.getName=ba("rect_drag");q.getSupportedShapeType=ba("rect");
q.X=function(a){a.hasOwnProperty("outline")&&(this.Tb=a.outline);a.hasOwnProperty("stroke")&&(this.Vb=a.stroke);a.hasOwnProperty("fill")&&(this.Nb=a.fill);a.hasOwnProperty("hi_outline")&&(this.Pb=a.hi_outline);a.hasOwnProperty("hi_stroke")&&(this.Rb=a.hi_stroke);a.hasOwnProperty("hi_fill")&&(this.Ob=a.hi_fill);a.hasOwnProperty("outline_width")&&(this.Ub=a.outline_width);a.hasOwnProperty("stroke_width")&&(this.Wb=a.stroke_width);a.hasOwnProperty("hi_outline_width")&&(this.Qb=a.hi_outline_width);a.hasOwnProperty("hi_stroke_width")&&
(this.Sb=a.hi_stroke_width)};q.startSelection=function(a,b){var c={x:a,y:b};this.sb=l;this.mb(c);this.F=new U(a,b);this.d.fireEvent("onSelectionStarted",{offsetX:a,offsetY:b});P(document.body,"-webkit-user-select","none")};q.stopSelection=function(){this.Ra();this.ha.clearRect(0,0,this.N.width,this.N.height);P(document.body,"-webkit-user-select","auto");delete this.w};
q.getShape=function(){if(this.w&&3<Math.abs(this.w.x-this.F.x)&&3<Math.abs(this.w.y-this.F.y)){var a=this.getViewportBounds(),a=this.d.lb({x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top});return new $c("rect",a)}};q.getViewportBounds=function(){var a,b;this.w.x>this.F.x?(a=this.w.x,b=this.F.x):(a=this.F.x,b=this.w.x);var c,d;this.w.y>this.F.y?(c=this.F.y,d=this.w.y):(c=this.w.y,d=this.F.y);return{top:c,right:a,bottom:d,left:b}};
q.drawShape=function(a,b,c){var d,f,e,h;b.style||(b.style={});"rect"==b.type&&(c?(d=b.style.hi_fill||this.Ob,c=b.style.hi_stroke||this.Rb,f=b.style.hi_outline||this.Pb,e=b.style.hi_outline_width||this.Qb,h=b.style.hi_stroke_width||this.Sb):(d=b.style.fill||this.Nb,c=b.style.stroke||this.Vb,f=b.style.outline||this.Tb,e=b.style.outline_width||this.Ub,h=b.style.stroke_width||this.Wb),b=b.geometry,f&&(a.lineJoin="round",a.lineWidth=e,a.strokeStyle=f,a.strokeRect(b.x+e/2,b.y+e/2,b.width-e,b.height-e)),
c&&(a.lineJoin="miter",a.lineWidth=h,a.strokeStyle=c,a.strokeRect(b.x+e+h/2,b.y+e+h/2,b.width-2*e-h,b.height-2*e-h)),d&&(a.lineJoin="miter",a.lineWidth=h,a.fillStyle=d,a.fillRect(b.x+e+h/2,b.y+e+h/2,b.width-2*e-h,b.height-2*e-h)))};function ue(a){return'<canvas class="annotorious-item annotorious-opacity-fade" style="position:absolute; top:0px; left:0px; width:'+Wd(a.width)+"px; height:"+Wd(a.height)+'px; z-index:0" width="'+Wd(a.width)+'" height="'+Wd(a.height)+'"></canvas>'}
function ce(a){return'<div class="annotorious-hint" style="white-space:nowrap; position:absolute; top:0px; left:0px; pointer-events:none;"><div class="annotorious-hint-msg annotorious-opacity-fade">'+Wd(a.cb)+'</div><div class="annotorious-hint-icon" style="pointer-events:auto"></div></div>'};function X(a,b){function c(b,c){P(d,"margin-"+b,c+"px");P(a,"margin-"+b,0);P(a,"padding-"+b,0)}this.S=a;this.dc={padding:a.style.padding,margin:a.style.margin};this.r=new Sc;this.Z=[];this.Ua=l;this.element=wb("div","annotorious-annotationlayer");P(this.element,"position","relative");P(this.element,"display","inline-block");var d=this.element,f=Qc(a,"margin"),e=Qc(a,"padding");(0!=f.top||0!=e.top)&&c("top",f.top+e.top);(0!=f.right||0!=e.right)&&c("right",f.right+e.right);(0!=f.bottom||0!=e.bottom)&&
c("bottom",f.bottom+e.bottom);(0!=f.left||0!=e.left)&&c("left",f.left+e.left);(f=a.parentNode)&&f.replaceChild(this.element,a);this.element.appendChild(a);f=Oc(a);this.$=V(ue,{width:f.width,height:f.height});fe&&gb(this.$,"annotorious-item-unfocus");this.element.appendChild(this.$);this.c=V(ue,{width:f.width,height:f.height});fe&&S(this.c,n);this.element.appendChild(this.c);this.popup=b?b:new ee(this);f=new te;f.init(this,this.c);this.Z.push(f);this.o=f;this.editor=new W(this);this.g=new ke(this.$,
this);this.Aa=new be(this,this.element);var h=this;fe&&(O(this.element,qe,function(a){a=a.relatedTarget;if(!a||!Ab(h.element,a))h.r.fireEvent("onMouseOverItem"),kb(h.$,"annotorious-item-unfocus","annotorious-item-focus")}),O(this.element,se,function(a){a=a.relatedTarget;if(!a||!Ab(h.element,a))h.r.fireEvent("onMouseOutOfItem"),kb(h.$,"annotorious-item-focus","annotorious-item-unfocus")}));he(this,pe?this.c:this.$);this.r.addHandler("onSelectionCompleted",function(a){var b=a.viewportBounds;h.editor.setPosition(new U(b.left+
h.S.offsetLeft,b.bottom+4+h.S.offsetTop));h.editor.open(n,a)});this.r.addHandler("onSelectionCanceled",function(){fe&&S(h.c,n);h.o.stopSelection()})}w(X,ge);q=X.prototype;q.U=p();q.gc=function(a){a.init(this,this.c);this.Z.push(a)};q.destroy=function(){var a=this.S;a.style.margin=this.dc.margin;a.style.padding=this.dc.padding;var b=this.element,c=b.parentNode;c&&c.replaceChild(a,b)};
q.Cb=function(a){this.g.v(a);var b=Ca(this.Z,function(b){return b.getSupportedShapeType()==a.shapes[0].type});if(b){S(this.c,l);this.g.l(n);var c=this.c.getContext("2d"),d=a.shapes[0],f=this,d="pixel"==d.units?d:dd(d,function(a){return f.ka(a)});b.drawShape(c,d)}b=bd(a.shapes[0]).geometry;b="pixel"==a.shapes[0].units?new U(b.x,b.y+b.height):this.ka(new U(b.x,b.y+b.height));this.editor.setPosition(new U(b.x+this.S.offsetLeft,b.y+4+this.S.offsetTop));this.editor.open(a)};
q.ka=function(a){var b=Mc(this.S);return a.width?{x:a.x*b.width,y:a.y*b.height,width:a.width*b.width,height:a.height*b.height}:{x:a.x*b.width,y:a.y*b.height}};q.ba=aa("o");q.m=function(){return this.g.m()};q.Ha=function(a,b){return Ea(this.g.Ha(a,b))};q.ca=aa("Z");q.getItem=function(){return{src:ve(this.S),element:this.S}};function ve(a){var b=a.getAttribute("data-original");return b?b:a.src}q.W=function(){S(this.$,n)};q.G=function(){this.Ua=n;this.Aa&&(this.Aa.destroy(),delete this.Aa)};
q.Ac=function(a){(this.o=Ca(this.Z,function(b){return b.getName()==a}))||console.log('WARNING: selector "'+a+'" not available')};q.X=function(a){B(this.Z,function(b){b.X(a)});ne(this.g)};q.ma=function(){S(this.$,l)};q.R=function(){this.Ua=l;this.Aa||(this.Aa=new be(this,this.element))};q.stopSelection=function(a){fe&&S(this.c,n);this.o.stopSelection();a&&this.g.C(a)};
q.lb=function(a){var b=Mc(this.S);return a.width?{x:a.x/b.width,y:a.y/b.height,width:a.width/b.width,height:a.height/b.height}:{x:a.x/b.width,y:a.y/b.height}};X.prototype.addSelector=X.prototype.gc;X.prototype.fireEvent=X.prototype.fireEvent;X.prototype.setCurrentSelector=X.prototype.Ac;X.prototype.toItemCoordinates=X.prototype.lb;function we(){hd(this,function(){return K("img.annotatable",document)})}w(we,gd);we.prototype.$a=function(a){return ve(a)};we.prototype.Ib=function(a){return new X(a)};we.prototype.kb=function(a){return ia(a)&&1==a.nodeType?"IMG"==a.tagName:n};function xe(a){return'<div class="annotorious-opacity-fade" style="white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"><div class="annotorious-ol-hint" style="width: 400px; margin:0px auto;">'+Wd(a.cb)+"</dvi></div>"};function ye(a,b){this.O=a;this.K=Oc(b.element);this.h=b.popup;P(this.h.element,"z-index",99E3);this.t=[];this.Oa=new OpenLayers.Layer.Boxes("Annotorious");this.O.addLayer(this.Oa);var c=this;this.O.events.register("move",this.O,function(){c.B&&c.Ba()});b.addHandler("beforePopupHide",function(){c.ia==c.B?c.h.clearHideTimer():c.Fa(c.ia,c.B)})}q=ye.prototype;q.destroy=function(){this.Oa.destroy()};
q.Ba=function(){var a=this.B.bb.div,b=Oc(a),c=Ic(a,this.O.div),a=c.y,c=c.x,d=b.width,f=b.height,b=Oc(this.h.element),a={y:a+f+5};c+b.width>this.K.width?(kb(this.h.element,"top-left","top-right"),a.x=c+d-b.width):(kb(this.h.element,"top-right","top-left"),a.x=c);0>a.x&&(a.x=0);a.x+b.width>this.K.width&&(a.x=this.K.width-b.width);a.y+b.height>this.K.height&&(a.y=this.K.height-b.height);this.h.setPosition(a)};q.yb=function(a){this.h.setAnnotation(a);this.Ba();this.h.show()};
q.Fa=function(a,b){a?(Ic(a.bb.div,this.O.div),xa("height"),P(a.Ja,"border-color","#fff000"),this.B=a,this.yb(a.z)):delete this.B;b&&P(b.Ja,"border-color","#fff")};
q.C=function(a){var b=a.shapes[0].geometry,b=new OpenLayers.Marker.Box(new OpenLayers.Bounds(b.x,b.y,b.x+b.width,b.y+b.height));gb(b.div,"annotorious-ol-boxmarker-outer");P(b.div,"border",m);var c=wb("div","annotorious-ol-boxmarker-inner");Lc(c,"100%","100%");b.div.appendChild(c);var d={z:a,bb:b,Ja:c},f=this;O(c,"mouseover",function(){f.B||f.Fa(d);f.ia=d});O(c,"mouseout",function(){delete f.ia;f.h.startHideTimer()});this.t.push(d);A.sort.call(this.t,function(a,b){return ad(b.z.shapes[0])-ad(a.z.shapes[0])}||
Ha);var e=1E4;B(this.t,function(a){P(a.bb.div,"z-index",e);e++});this.Oa.addMarker(b)};q.v=function(a){var b=Ca(this.t,function(b){return b.z==a});b&&(D(this.t,b),this.Oa.removeMarker(b.bb))};q.m=function(){return Aa(this.t,function(a){return a.z})};q.l=function(a){a||this.h.startHideTimer()};function ze(a){function b(){var a=parseInt(Q(d.element,"width"),10),b=parseInt(Q(d.element,"height"),10);Lc(d.c,a,b);d.c.width=a;d.c.height=b}this.O=a;this.element=a.div;var c=this.element.style[xa("position")]||"";"absolute"!=c&&"relative"!=c&&P(this.element,"position","relative");this.r=new Sc;this.M=V(xe,{cb:"Click and Drag"});P(this.M,"z-index",9998);R(this.M,0);this.element.appendChild(this.M);this.popup=new ee(this);this.g=new ye(a,this);this.c=V(ue,{width:"0",height:"0"});S(this.c,n);P(this.c,
"position","absolute");P(this.c,"top","0px");P(this.c,"z-index",9999);this.element.appendChild(this.c);var d=this;b();this.o=new te;this.o.init(this,this.c);this.Ea=i;this.editor=new W(this);P(this.editor.element,"z-index",1E4);window.addEventListener?window.addEventListener("resize",b,n):window.attachEvent&&window.attachEvent("onresize",b);O(this.element,"mouseover",function(a){a=a.relatedTarget;(!a||!Ab(d.element,a))&&d.r.fireEvent("onMouseOverItem")});O(this.element,"mouseout",function(a){a=a.relatedTarget;
(!a||!Ab(d.element,a))&&d.r.fireEvent("onMouseOutOfItem")});O(this.c,"mousedown",function(a){var b=Jc(d.element);d.o.startSelection(a.clientX-b.x,a.clientY-b.y)});this.r.addHandler("onSelectionCompleted",function(a){P(d.c,"pointer-events","none");a=a.viewportBounds;d.editor.setPosition(new U(a.left,a.bottom+4));d.editor.open()});this.r.addHandler("onSelectionCanceled",function(){d.stopSelection()})}w(ze,ge);q=ze.prototype;q.R=p();q.G=p();
q.U=function(a){P(this.c,"pointer-events","auto");var b=this;S(this.c,l);R(this.M,0.8);window.setTimeout(function(){R(b.M,0)},2E3);a&&(this.Ea=a)};q.destroy=function(){this.g.destroy();zb(this.M);zb(this.c)};q.gc=p();q.Cb=function(a){this.g.v(a);var b=this.o,c=this;if(b){S(this.c,l);this.g.l(i);var d=this.c.getContext("2d"),f=dd(a.shapes[0],function(a){return c.ka(a)});console.log(f);b.drawShape(d,f);b=bd(f).geometry;this.editor.setPosition(new U(b.x,b.y+b.height));this.editor.open(a)}};
q.ka=function(a){var b=this.O.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x,a.y));return(a=a.width?this.O.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x+a.width,a.y+a.height)):n)?{x:b.x,y:a.y,width:a.x-b.x+2,height:b.y-a.y+2}:{x:b.x,y:b.y}};q.m=function(){return this.g.m()};q.ca=p();q.getItem=function(){return{src:"map://openlayers/something"}};q.Ma=p();
q.lb=function(a){var b=this.O.getLonLatFromPixel(new OpenLayers.Pixel(a.x,a.y));return(a=a.width?new OpenLayers.Pixel(a.x+a.width-2,a.y+a.height-2):n)?(a=this.O.getLonLatFromPixel(a),b={x:b.lon,y:a.lat,width:a.lon-b.lon,height:b.lat-a.lat},console.log(b),b):{x:b.lon,y:b.lat}};function Ae(){hd(this)}w(Ae,gd);Ae.prototype.$a=ba("map://openlayers/something");Ae.prototype.Ib=function(a){return new ze(a)};Ae.prototype.kb=function(a){return a instanceof OpenLayers.Map};function Be(a,b){this.L=a;this.K=Oc(a.element);this.h=b.popup;P(this.h.element,"z-index",99E3);this.t=[];var c=this;this.L.addHandler("animation",function(){c.B&&c.Ba()});b.addHandler("beforePopupHide",function(){c.ia==c.B?c.h.clearHideTimer():c.Fa(c.ia,c.B)})}q=Be.prototype;
q.Ba=function(){var a=this.L.element,b=this.B.hb,c=Oc(b),b=Ic(b,a),a=b.y,b=b.x,d=c.width,f=c.height,c=Oc(this.h.element),a={x:b,y:a+f+12};kb(this.h.element,"top-right","top-left");this.L.isFullPage()||(b+c.width>this.K.width&&(kb(this.h.element,"top-left","top-right"),a.x=b+d-c.width),0>a.x&&(a.x=0),a.x+c.width>this.K.width&&(a.x=this.K.width-c.width),a.y+c.height>this.K.height&&(a.y=this.K.height-c.height));this.h.setPosition(a)};q.yb=function(a){this.h.setAnnotation(a);this.Ba();this.h.show()};
q.Fa=function(a,b){a?(P(a.Ja,"border-color","#fff000"),this.B=a,this.yb(a.z)):delete this.B;b&&P(b.Ja,"border-color","#fff")};
q.C=function(a){var b=a.shapes[0].geometry,c=wb("div","annotorious-ol-boxmarker-outer"),d=wb("div","annotorious-ol-boxmarker-inner");Lc(d,"100%","100%");c.appendChild(d);var b=new OpenSeadragon.Rect(b.x,b.y,b.width,b.height),f={z:a,hb:c,Ja:d},e=this;O(d,"mouseover",function(){e.B||e.Fa(f);e.ia=f});O(d,"mouseout",function(){delete e.ia;e.h.startHideTimer()});this.t.push(f);A.sort.call(this.t,function(a,b){return ad(b.z.shapes[0])-ad(a.z.shapes[0])}||Ha);var h=1;B(this.t,function(a){P(a.hb,"z-index",
h);h++});this.L.drawer.addOverlay(c,b)};q.v=function(a){var b=Ca(this.t,function(b){return b.z==a});b&&(D(this.t,b),this.L.drawer.removeOverlay(b.hb))};q.m=function(){return Aa(this.t,function(a){console.log(a);return a.z})};q.l=p();q.destroy=function(){var a=this;B(this.t,function(b){a.L.removeOverlay(b.hb)});this.t=[]};function Ce(a){this.element=a.element;var b=document;b.querySelectorAll&&b.querySelector?b=b.querySelector(".openseadragon-container"):(b=document,b=(b.querySelectorAll&&b.querySelector?b.querySelectorAll(".openseadragon-container"):b.getElementsByClassName?b.getElementsByClassName("openseadragon-container"):sb())[0]);P(b||m,"z-index",0);this.L=a;this.r=new Sc;this.Z=[];this.Ua=l;this.M=V(xe,{cb:"Click and Drag"});R(this.M,0);this.element.appendChild(this.M);this.popup=new ee(this);this.g=new Be(a,
this);this.c=V(ue,{width:"0",height:"0"});S(this.c,n);this.element.appendChild(this.c);var c=this,a=parseInt(Q(c.element,"width"),10),b=parseInt(Q(c.element,"height"),10);Lc(c.c,a,b);c.c.width=a;c.c.height=b;a=new te;a.init(this,this.c);this.Z.push(a);this.o=a;this.editor=new W(this);he(this,this.c);this.r.addHandler("onSelectionCompleted",function(a){a=a.viewportBounds;c.editor.setPosition(new U(a.left,a.bottom+4));c.editor.open()});this.r.addHandler("onSelectionCanceled",function(){c.stopSelection()})}
w(Ce,ge);q=Ce.prototype;q.R=p();q.G=p();q.destroy=function(){this.g.destroy();delete this.g};q.U=function(a){P(this.c,"pointer-events","auto");var b=this;S(this.c,l);R(this.M,0.8);window.setTimeout(function(){R(b.M,0)},2E3);a&&(this.Ea=a)};q.Cb=function(a){this.g.v(a);var b=this.o,c=this;if(b){S(this.c,l);this.g.l(i);var d=this.c.getContext("2d"),f=dd(a.shapes[0],function(a){return c.ka(a)});b.drawShape(d,f);b=bd(f).geometry;this.editor.setPosition(new U(b.x,b.y+b.height+4));this.editor.open(a)}};
q.ka=function(a){var b=Rc(this.element);b.top+=window.pageYOffset;b.left+=window.pageXOffset;var c=new OpenSeadragon.Point(a.x,a.y),a=a.width?new OpenSeadragon.Point(a.x+a.width,a.y+a.height):n,c=this.L.viewport.viewportToWindowCoordinates(c);return a?(a=this.L.viewport.viewportToWindowCoordinates(a),{x:c.x-b.left,y:c.y-b.top,width:a.x-c.x+2,height:a.y-c.y+2}):c};q.m=function(){return this.g.m()};q.ca=p();q.getItem=function(){return{src:"dzi://openseadragon/something"}};q.Ma=p();q.ba=aa("o");
q.lb=function(a){var b=Rc(this.element);b.top+=window.pageYOffset;b.left+=window.pageXOffset;var c=new OpenSeadragon.Point(a.x+b.left,a.y+b.top),a=a.width?new OpenSeadragon.Point(a.x+b.left+a.width-2,a.y+b.top+a.height-2):n,c=this.L.viewport.windowToViewportCoordinates(c);return a?(a=this.L.viewport.windowToViewportCoordinates(a),{x:c.x,y:c.y,width:a.x-c.x,height:a.y-c.y}):c};function De(){hd(this)}w(De,gd);De.prototype.$a=ba("dzi://openseadragon/something");De.prototype.Ib=function(a){return new Ce(a)};De.prototype.kb=function(a){return!a.id||0!=a.id.indexOf("openseadragon")||!a.hasOwnProperty("drawer")?n:l};function Y(){function a(){Ee(b)}this.Zb=n;this.j=[new we];window.OpenLayers&&this.j.push(new Ae);window.OpenSeadragon&&this.j.push(new De);this.Ca=[];var b=this;window.addEventListener?window.addEventListener("load",a,n):window.attachEvent&&window.attachEvent("onload",a)}function Ee(a){a.Zb||(B(a.j,function(a){a.init()}),B(a.Ca,function(b){b.initPlugin&&b.initPlugin(a);B(a.j,function(a){a.Va(b)})}),a.Zb=l)}function Z(a,b){return Ca(a.j,function(a){return nd(a,b)})}q=Y.prototype;
q.U=function(a,b){var c=i,d=i;t(a)?(c=a,d=b):v(a)&&(d=a);if(c){var f=Z(this,c);f&&f.U(c,d)}else B(this.j,function(a){a.U(d)})};q.C=function(a,b){var c;c=a.src;if(!(0<c.indexOf("://"))){var d=document.createElement("a");d.href=c;c=d.protocol+"//"+d.host+d.pathname}a.src=c;(c=Z(this,a.src))&&c.C(a,b)};q.addHandler=function(a,b){B(this.j,function(c){c.addHandler(a,b)})};
q.Va=function(a,b){try{var c=new window.annotorious.plugin[a](b);"complete"==document.readyState?(c.initPlugin&&c.initPlugin(this),B(this.j,function(a){a.Va(c)})):this.Ca.push(c)}catch(d){console.log("Could not load plugin: "+a)}};q.destroy=function(a){if(a){var b=Z(this,a);b&&b.destroy(a)}else B(this.j,function(a){a.destroy()})};q.ba=function(a){var b=Z(this,a);if(b)return b.ba(a)};q.m=function(a){if(a){var b=Z(this,a);return b?b.m(a):[]}var c=[];B(this.j,function(a){Fa(c,a.m())});return c};
q.ca=function(a){var b=Z(this,a);return b?b.ca(a):[]};q.W=function(a){if(a){var b=Z(this,a);b&&b.W(a)}else B(this.j,function(a){a.W()})};q.G=function(a){if(a){var b=Z(this,a);b&&b.G(a)}else B(this.j,function(a){a.G()})};q.stopSelection=function(a){if(a){var b=Z(this,a);b&&b.stopSelection(a)}else B(this.j,function(a){a.stopSelection()})};q.l=function(a){if(a){var b=Z(this,a.src);b&&b.l(a)}else B(this.j,function(a){a.l()})};
q.Gb=function(a){Ee(this);var b=Ca(this.j,function(b){return b.kb(a)});b?b.Gb(a):g("Error: Annotorious does not support this media type in the current version or build configuration.")};q.zc=function(a){var b=this;B(this.m(a),function(a){b.v(a)})};q.v=function(a){var b=Z(this,a.src);b&&b.v(a)};q.reset=function(){B(this.j,function(a){a.destroy();a.init()})};q.Ma=function(a,b){var c=Z(this,a);c&&c.Ma(a,b)};q.X=function(a){B(this.j,function(b){b.X(a)})};q.Uc=function(a){a?this.R(i):this.G(i)};
q.ma=function(a){if(a){var b=Z(this,a);b&&b.ma(a)}else B(this.j,function(a){a.ma()})};q.R=function(a){if(a){var b=Z(this,a);b&&b.R(a)}else B(this.j,function(a){a.R()})};window.anno=new Y;Y.prototype.activateSelector=Y.prototype.U;Y.prototype.addAnnotation=Y.prototype.C;Y.prototype.addHandler=Y.prototype.addHandler;Y.prototype.addPlugin=Y.prototype.Va;Y.prototype.destroy=Y.prototype.destroy;Y.prototype.getActiveSelector=Y.prototype.ba;Y.prototype.getAnnotations=Y.prototype.m;Y.prototype.getAvailableSelectors=Y.prototype.ca;Y.prototype.hideAnnotations=Y.prototype.W;Y.prototype.hideSelectionWidget=Y.prototype.G;Y.prototype.highlightAnnotation=Y.prototype.l;
Y.prototype.makeAnnotatable=Y.prototype.Gb;Y.prototype.removeAll=Y.prototype.zc;Y.prototype.removeAnnotation=Y.prototype.v;Y.prototype.reset=Y.prototype.reset;Y.prototype.setActiveSelector=Y.prototype.Ma;Y.prototype.setProperties=Y.prototype.X;Y.prototype.showAnnotations=Y.prototype.ma;Y.prototype.showSelectionWidget=Y.prototype.R;window.annotorious||(window.annotorious={});window.annotorious.plugin||(window.annotorious.plugin={});
window.annotorious.geometry||(window.annotorious.geometry={},window.annotorious.geometry.expand=cd,window.annotorious.geometry.getBoundingRect=bd);Y.prototype.setSelectionEnabled=Y.prototype.Uc;
